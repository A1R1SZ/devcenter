{"ast":null,"code":"// BookmarkPage.js\nimport'./App.css';import TopNavbar from'../components/topNavbar';import DevContent from'../components/devContent';import{Box,Card,Typography}from'@mui/material';import axios from'axios';import{useEffect,useMemo,useState}from'react';import{useNavigate}from'react-router-dom';import DevContentModal from'../components/devContentModal';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function BookmarkPage(){const[bookmarkedContents,setBookmarkedContents]=useState([]);const[loading,setLoading]=useState(true);const[selectedPost,setSelectedPost]=useState(null);const[currentUser,setCurrentUser]=useState({id:null,role:null});const[token,setToken]=useState(null);const navigate=useNavigate();const today=new Date().toLocaleDateString('en-GB',{day:'2-digit',month:'long',year:'numeric'});useEffect(()=>{const storedToken=localStorage.getItem(\"token\");if(!storedToken){navigate(\"/\");}else{setToken(storedToken);}},[navigate]);useEffect(()=>{const fetchUser=async()=>{const token=localStorage.getItem(\"token\");if(!token)return;try{const response=await axios.get(\"http://localhost:5000/get-profile-info\",{headers:{Authorization:`Bearer ${token}`}});setCurrentUser({id:response.data.id,role:response.data.role});}catch(err){console.error(\"❌ Failed to fetch user\",err);}};fetchUser();},[]);useEffect(()=>{if(!token)return;const fetchBookmarked=async()=>{try{const response=await axios.get('http://localhost:5000/bookmarks',{headers:{Authorization:`Bearer ${token}`}});setBookmarkedContents(response.data);}catch(err){console.error('❌ Failed to fetch bookmarked posts',err);}finally{setLoading(false);}};fetchBookmarked();},[token]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TopNavbar,{}),/*#__PURE__*/_jsx(Typography,{sx:{position:'fixed',left:'20px',top:'50%',transform:'translateY(-50%)',color:'white',fontWeight:600,fontSize:30},children:\"BOOKMARKS\"}),/*#__PURE__*/_jsx(Typography,{sx:{position:'fixed',right:'20px',top:'50%',transform:'translateY(-50%)',color:'white',fontWeight:600,fontSize:30},children:today}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center',width:'100%'},children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',width:'100%'},children:/*#__PURE__*/_jsxs(Card,{sx:{backgroundColor:'#181818',padding:'20px',width:'55%',minHeight:'100vh',display:'flex',flexDirection:'column',overflowY:'auto'},children:[loading?/*#__PURE__*/_jsx(Typography,{color:\"white\",sx:{textAlign:'center',marginTop:'50px'},children:\"Loading...\"}):bookmarkedContents.length===0?/*#__PURE__*/_jsx(Typography,{color:\"white\",sx:{textAlign:'center',marginTop:'50px'},children:\"You have no bookmarked content.\"}):bookmarkedContents.map(item=>/*#__PURE__*/_jsx(DevContent,{onClick:openForum=>{setSelectedPost({...item,openForum});},postId:item.post_id,favouriteCounter:item.post_like_count,bookmarkCounter:item.post_bookmark_count,isLiked:item.is_liked,isBookmarked:item.is_bookmarked,resource_name:item.resource_title,title:item.post_title,category:item.post_type,content:item.post_content,username:item.author_username,currentUserId:currentUser.id,currentUserRole:currentUser.role,commentCounter:item.post_comment,postImage:item.post_graphic?item.post_graphic.startsWith(\"http\")?item.post_graphic:`http://localhost:5000/uploads/${item.post_graphic}`:null,resource_color:item.resource_color,resource_version:item.resource_version,postAuthorId:item.post_author,resource_tag:item.resource_tag_name,postDate:item.post_created_at,resource_desc:item.resource_desc},item.post_id)),selectedPost&&/*#__PURE__*/_jsx(DevContentModal,{post:selectedPost,onClose:()=>setSelectedPost(null),onPostDelete:deletedId=>setBookmarkedContents(prev=>prev.filter(post=>post.post_id!==deletedId)),openForumInitially:selectedPost.openForum,favouriteCounter:selectedPost.post_like_count,bookmarkCounter:selectedPost.post_bookmark_count,commentCounter:selectedPost.post_comment,isLiked:selectedPost.is_liked,isBookmarked:selectedPost.is_bookmarked})]})})})]});}export default BookmarkPage;","map":{"version":3,"names":["TopNavbar","DevContent","Box","Card","Typography","axios","useEffect","useMemo","useState","useNavigate","DevContentModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BookmarkPage","bookmarkedContents","setBookmarkedContents","loading","setLoading","selectedPost","setSelectedPost","currentUser","setCurrentUser","id","role","token","setToken","navigate","today","Date","toLocaleDateString","day","month","year","storedToken","localStorage","getItem","fetchUser","response","get","headers","Authorization","data","err","console","error","fetchBookmarked","children","sx","position","left","top","transform","color","fontWeight","fontSize","right","display","flexDirection","alignItems","width","justifyContent","backgroundColor","padding","minHeight","overflowY","textAlign","marginTop","length","map","item","onClick","openForum","postId","post_id","favouriteCounter","post_like_count","bookmarkCounter","post_bookmark_count","isLiked","is_liked","isBookmarked","is_bookmarked","resource_name","resource_title","title","post_title","category","post_type","content","post_content","username","author_username","currentUserId","currentUserRole","commentCounter","post_comment","postImage","post_graphic","startsWith","resource_color","resource_version","postAuthorId","post_author","resource_tag","resource_tag_name","postDate","post_created_at","resource_desc","post","onClose","onPostDelete","deletedId","prev","filter","openForumInitially"],"sources":["C:/Users/AIRISZ/devcenter/frontend/src/pages/BookmarkPage.js"],"sourcesContent":["// BookmarkPage.js\r\nimport './App.css';\r\nimport TopNavbar from '../components/topNavbar';\r\nimport DevContent from '../components/devContent';\r\nimport { Box, Card, Typography } from '@mui/material';\r\nimport axios from 'axios';\r\nimport { useEffect, useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport DevContentModal from '../components/devContentModal';\r\n\r\nfunction BookmarkPage() {\r\n  const [bookmarkedContents, setBookmarkedContents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedPost, setSelectedPost] = useState(null);\r\n  const [currentUser, setCurrentUser] = useState({ id: null, role: null });\r\n  const [token, setToken] = useState(null);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const today = new Date().toLocaleDateString('en-GB', {\r\n    day: '2-digit',\r\n    month: 'long',\r\n    year: 'numeric',\r\n  });\r\n\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem(\"token\");\r\n    if (!storedToken) {\r\n      navigate(\"/\");\r\n    } else {\r\n      setToken(storedToken);\r\n    }\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) return;\r\n\r\n      try {\r\n        const response = await axios.get(\"http://localhost:5000/get-profile-info\", {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setCurrentUser({ id: response.data.id, role: response.data.role });\r\n      } catch (err) {\r\n        console.error(\"❌ Failed to fetch user\", err);\r\n      }\r\n    };\r\n\r\n    fetchUser();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n\r\n    const fetchBookmarked = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/bookmarks', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setBookmarkedContents(response.data);\r\n      } catch (err) {\r\n        console.error('❌ Failed to fetch bookmarked posts', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchBookmarked();\r\n  }, [token]);\r\n\r\n  return (\r\n    <>\r\n      <TopNavbar />\r\n      <Typography\r\n        sx={{\r\n          position: 'fixed',\r\n          left: '20px',\r\n          top: '50%',\r\n          transform: 'translateY(-50%)',\r\n          color: 'white',\r\n          fontWeight: 600,\r\n          fontSize: 30,\r\n        }}\r\n      >\r\n        BOOKMARKS\r\n      </Typography>\r\n\r\n      <Typography\r\n        sx={{\r\n          position: 'fixed',\r\n          right: '20px',\r\n          top: '50%',\r\n          transform: 'translateY(-50%)',\r\n          color: 'white',\r\n          fontWeight: 600,\r\n          fontSize: 30,\r\n        }}\r\n      >\r\n        {today}\r\n      </Typography>\r\n\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          width: '100%',\r\n        }}\r\n      >\r\n        <Box sx={{ display: 'flex', justifyContent: 'center', width: '100%' }}>\r\n          <Card\r\n            sx={{\r\n              backgroundColor: '#181818',\r\n              padding: '20px',\r\n              width: '55%',\r\n              minHeight: '100vh',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              overflowY: 'auto',\r\n            }}\r\n          >\r\n            {loading ? (\r\n              <Typography color=\"white\" sx={{ textAlign: 'center', marginTop: '50px' }}>\r\n                Loading...\r\n              </Typography>\r\n            ) : bookmarkedContents.length === 0 ? (\r\n              <Typography color=\"white\" sx={{ textAlign: 'center', marginTop: '50px' }}>\r\n                You have no bookmarked content.\r\n              </Typography>\r\n            ) : (\r\n              bookmarkedContents.map((item) => (\r\n                <DevContent\r\n                  onClick={(openForum) => {\r\n                    setSelectedPost({ ...item, openForum });\r\n                  }}\r\n                  key={item.post_id}\r\n                  postId={item.post_id}\r\n                  favouriteCounter={item.post_like_count}\r\n                  bookmarkCounter={item.post_bookmark_count}\r\n                  isLiked={item.is_liked}\r\n                  isBookmarked={item.is_bookmarked}\r\n                  resource_name={item.resource_title}\r\n                  title={item.post_title}\r\n                  category={item.post_type}\r\n                  content={item.post_content}\r\n                  username={item.author_username}\r\n                  currentUserId={currentUser.id}\r\n                  currentUserRole={currentUser.role}\r\n                  commentCounter={item.post_comment}\r\n                    postImage={\r\n                        item.post_graphic\r\n                        ? item.post_graphic.startsWith(\"http\")\r\n                            ? item.post_graphic\r\n                            : `http://localhost:5000/uploads/${item.post_graphic}`\r\n                        : null\r\n                    }\r\n                  resource_color={item.resource_color}\r\n                  resource_version={item.resource_version}\r\n                  postAuthorId={item.post_author}\r\n                  resource_tag={item.resource_tag_name}\r\n                  postDate={item.post_created_at}\r\n                  resource_desc={item.resource_desc}\r\n                />\r\n              ))\r\n            )}\r\n            {selectedPost && (\r\n              <DevContentModal\r\n                post={selectedPost}\r\n                onClose={() => setSelectedPost(null)}\r\n                onPostDelete={(deletedId) =>\r\n                  setBookmarkedContents((prev) =>\r\n                    prev.filter((post) => post.post_id !== deletedId)\r\n                  )\r\n                }\r\n                openForumInitially={selectedPost.openForum}\r\n                favouriteCounter={selectedPost.post_like_count}\r\n                bookmarkCounter={selectedPost.post_bookmark_count}\r\n                commentCounter={selectedPost.post_comment}\r\n                isLiked={selectedPost.is_liked}\r\n                isBookmarked={selectedPost.is_bookmarked}\r\n              />\r\n            )}\r\n          </Card>\r\n        </Box>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default BookmarkPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}