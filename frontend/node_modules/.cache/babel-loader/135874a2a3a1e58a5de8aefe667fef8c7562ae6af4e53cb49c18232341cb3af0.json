{"ast":null,"code":"import'./App.css';import{useContext,useState}from'react';import{Button,Card,CardContent,Link,TextField,Typography}from'@mui/material';import{Link as RouterLink,useNavigate}from'react-router-dom';import{UserContext}from'../contexts/UserContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const{refreshUser}=useContext(UserContext);const baseURL=process.env.REACT_APP_API_URL;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const navigate=useNavigate();const handleLogin=async()=>{setError('');try{const response=await fetch(`${baseURL}/login`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username,password})});const data=await response.json();if(response.ok){localStorage.setItem(\"token\",data.token);// Store JWT token\nlocalStorage.setItem(\"username\",username);refreshUser();navigate(\"/homepage\");// Redirect to homepage after login\n}else{setError(data.message||\"Login failed\");}}catch(error){console.error(\"Login error:\",error);setError(\"Server error. Please try again later.\");}};return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'100vh'},children:/*#__PURE__*/_jsx(Card,{sx:{maxWidth:500,textAlign:'center',padding:'25px',paddingTop:'50px',paddingBottom:'50px',borderRadius:'16px'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h1\",children:\"DevCenter\"}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error}),/*#__PURE__*/_jsx(TextField,{label:\"Username\",required:true,fullWidth:true,margin:\"normal\",value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",required:true,type:\"password\",fullWidth:true,margin:\"normal\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(Button,{sx:{backgroundColor:'darkgreen',color:'white',marginTop:'10px',marginBottom:'10px',padding:'10px',width:150},onClick:handleLogin,children:\"Sign In\"}),/*#__PURE__*/_jsxs(Typography,{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{component:RouterLink,to:\"/register\",children:\"Register Here\"})]})]})})});}export default App;","map":{"version":3,"names":["useContext","useState","Button","Card","CardContent","Link","TextField","Typography","RouterLink","useNavigate","UserContext","jsx","_jsx","jsxs","_jsxs","App","refreshUser","baseURL","process","env","REACT_APP_API_URL","username","setUsername","password","setPassword","error","setError","navigate","handleLogin","response","fetch","method","headers","body","JSON","stringify","data","json","ok","localStorage","setItem","token","message","console","style","display","justifyContent","alignItems","minHeight","children","sx","maxWidth","textAlign","padding","paddingTop","paddingBottom","borderRadius","variant","color","label","required","fullWidth","margin","value","onChange","e","target","type","backgroundColor","marginTop","marginBottom","width","onClick","component","to"],"sources":["C:/Users/AIRISZ/devcenter/frontend/src/pages/App.js"],"sourcesContent":["import './App.css';\r\nimport { useContext, useState } from 'react';\r\nimport { Button, Card, CardContent, Link, TextField, Typography } from '@mui/material';\r\nimport { Link as RouterLink, useNavigate } from 'react-router-dom';\r\nimport { UserContext } from '../contexts/UserContext';\r\n\r\nfunction App() {\r\n  const { refreshUser } = useContext(UserContext);\r\n  const baseURL = process.env.REACT_APP_API_URL;\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogin = async () => {\r\n    setError('');\r\n    try {\r\n      const response = await fetch(`${baseURL}/login`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n      \r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        localStorage.setItem(\"token\", data.token); // Store JWT token\r\n        localStorage.setItem(\"username\", username);\r\n        refreshUser();\r\n        navigate(\"/homepage\"); // Redirect to homepage after login\r\n      } else {\r\n        setError(data.message || \"Login failed\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Login error:\", error);\r\n      setError(\"Server error. Please try again later.\");\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '100vh' }}>\r\n      <Card sx={{ maxWidth: 500, textAlign: 'center', padding: '25px', paddingTop: '50px', paddingBottom: '50px', borderRadius: '16px' }}>\r\n        <CardContent>\r\n          <Typography variant='h1'>DevCenter</Typography>\r\n\r\n          {error && <Typography color=\"error\">{error}</Typography>}\r\n\r\n          <TextField \r\n            label='Username' \r\n            required \r\n            fullWidth \r\n            margin='normal' \r\n            value={username} \r\n            onChange={(e) => setUsername(e.target.value)}\r\n          />\r\n          <TextField \r\n            label='Password' \r\n            required \r\n            type='password' \r\n            fullWidth \r\n            margin='normal' \r\n            value={password} \r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n\r\n          {/* <Typography>\r\n            Forget Password? <Link href='#'>Click here</Link>\r\n          </Typography>\r\n\r\n          <Typography>\r\n            Sign in as <Link component={RouterLink} to='/homepage'>Guest</Link>\r\n          </Typography> */}\r\n\r\n          <Button \r\n            sx={{ backgroundColor: 'darkgreen', color: 'white', marginTop: '10px', marginBottom: '10px', padding: '10px', width: 150 }} \r\n            onClick={handleLogin}\r\n          >\r\n            Sign In\r\n          </Button>\r\n\r\n          <Typography>\r\n            Don't have an account? <Link component={RouterLink} to=\"/register\">Register Here</Link>\r\n          </Typography>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"AAAA,MAAO,WAAW,CAClB,OAASA,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAC5C,OAASC,MAAM,CAAEC,IAAI,CAAEC,WAAW,CAAEC,IAAI,CAAEC,SAAS,CAAEC,UAAU,KAAQ,eAAe,CACtF,OAASF,IAAI,GAAI,CAAAG,UAAU,CAAEC,WAAW,KAAQ,kBAAkB,CAClE,OAASC,WAAW,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAAEC,WAAY,CAAC,CAAGhB,UAAU,CAACU,WAAW,CAAC,CAC/C,KAAM,CAAAO,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAC7C,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACsB,QAAQ,CAAEC,WAAW,CAAC,CAAGvB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACwB,KAAK,CAAEC,QAAQ,CAAC,CAAGzB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAA0B,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAmB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9BF,QAAQ,CAAC,EAAE,CAAC,CACZ,GAAI,CACF,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGb,OAAO,QAAQ,CAAE,CAC/Cc,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEd,QAAQ,CAAEE,QAAS,CAAC,CAC7C,CAAC,CAAC,CAEF,KAAM,CAAAa,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClC,GAAIR,QAAQ,CAACS,EAAE,CAAE,CACfC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEJ,IAAI,CAACK,KAAK,CAAC,CAAE;AAC3CF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAEnB,QAAQ,CAAC,CAC1CL,WAAW,CAAC,CAAC,CACbW,QAAQ,CAAC,WAAW,CAAC,CAAE;AACzB,CAAC,IAAM,CACLD,QAAQ,CAACU,IAAI,CAACM,OAAO,EAAI,cAAc,CAAC,CAC1C,CACF,CAAE,MAAOjB,KAAK,CAAE,CACdkB,OAAO,CAAClB,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACpCC,QAAQ,CAAC,uCAAuC,CAAC,CACnD,CACF,CAAC,CAED,mBACEd,IAAA,QAAKgC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAQ,CAAEC,SAAS,CAAE,OAAQ,CAAE,CAAAC,QAAA,cAClGrC,IAAA,CAACT,IAAI,EAAC+C,EAAE,CAAE,CAAEC,QAAQ,CAAE,GAAG,CAAEC,SAAS,CAAE,QAAQ,CAAEC,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,MAAM,CAAEC,aAAa,CAAE,MAAM,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAP,QAAA,cACjInC,KAAA,CAACV,WAAW,EAAA6C,QAAA,eACVrC,IAAA,CAACL,UAAU,EAACkD,OAAO,CAAC,IAAI,CAAAR,QAAA,CAAC,WAAS,CAAY,CAAC,CAE9CxB,KAAK,eAAIb,IAAA,CAACL,UAAU,EAACmD,KAAK,CAAC,OAAO,CAAAT,QAAA,CAAExB,KAAK,CAAa,CAAC,cAExDb,IAAA,CAACN,SAAS,EACRqD,KAAK,CAAC,UAAU,CAChBC,QAAQ,MACRC,SAAS,MACTC,MAAM,CAAC,QAAQ,CACfC,KAAK,CAAE1C,QAAS,CAChB2C,QAAQ,CAAGC,CAAC,EAAK3C,WAAW,CAAC2C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC9C,CAAC,cACFnD,IAAA,CAACN,SAAS,EACRqD,KAAK,CAAC,UAAU,CAChBC,QAAQ,MACRO,IAAI,CAAC,UAAU,CACfN,SAAS,MACTC,MAAM,CAAC,QAAQ,CACfC,KAAK,CAAExC,QAAS,CAChByC,QAAQ,CAAGC,CAAC,EAAKzC,WAAW,CAACyC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC9C,CAAC,cAUFnD,IAAA,CAACV,MAAM,EACLgD,EAAE,CAAE,CAAEkB,eAAe,CAAE,WAAW,CAAEV,KAAK,CAAE,OAAO,CAAEW,SAAS,CAAE,MAAM,CAAEC,YAAY,CAAE,MAAM,CAAEjB,OAAO,CAAE,MAAM,CAAEkB,KAAK,CAAE,GAAI,CAAE,CAC3HC,OAAO,CAAE5C,WAAY,CAAAqB,QAAA,CACtB,SAED,CAAQ,CAAC,cAETnC,KAAA,CAACP,UAAU,EAAA0C,QAAA,EAAC,yBACa,cAAArC,IAAA,CAACP,IAAI,EAACoE,SAAS,CAAEjE,UAAW,CAACkE,EAAE,CAAC,WAAW,CAAAzB,QAAA,CAAC,eAAa,CAAM,CAAC,EAC7E,CAAC,EACF,CAAC,CACV,CAAC,CACJ,CAAC,CAEV,CAEA,cAAe,CAAAlC,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}